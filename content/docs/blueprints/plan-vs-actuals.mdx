---
title: Plan vs Actuals
description: A production-ready financial blueprint demonstrating Plan vs Actuals variance analysis using Omora Labs components.
---

export const blueprint_name="plan_vs_actuals"

## Overview

This blueprint demonstrates a production-grade Plan vs Actuals variance analysis built using Omora Labs components. It shows how semantic layers, facts, and dbt transformations compose into a reusable financial reporting pipeline with hierarchical P&L rollups and variance metrics.

## Assets

- Source code: <a href="https://github.com/omoralabs/plan-vs-actuals" target="_blank">GitHub</a>
- Live report: <a href="https://app.hex.tech/019b6514-4a4f-7002-9c8d-dff74ca45f74/app/Budget-vs-Actuals-by-Omora-Labs-0328SrWYqP3tnj8DcCZpwm/latest?&tab=reports" target="_blank">Hex</a>

## Live Report

<link rel="stylesheet" href="https://static.hex.site/embed/embedStyles.css" />
<div className="responsive-embed">
  <iframe
    className="w-full aspect-video"
    style={{ border: 'none' }}
    src="https://app.hex.tech/019b6514-4a4f-7002-9c8d-dff74ca45f74/app/0328SrWYqP3tnj8DcCZpwm/latest?embedded=true&tab=reports"
  />
</div>

## Dependencies

- Semantic Layers: [GL Accounts](/semantic-layers/gl-accounts), [GL Accounts Types](/semantic-layers/gl-accounts-types), [Dates](/semantic-layers/dates), [Value Types](/semantic-layers/value-types)
- Facts: [PnL](/facts/pnl)
- Transformations: [PnL Rollup](/transformations/pnl-rollup), [PnL Metrics](/transformations/pnl-metrics), [PnL Pivot](/transformations/pnl-pivot)

## How to Use

1. Run the following command from your terminal or clone or fork the <a href="https://github.com/omoralabs/plan-vs-actuals" target="_blank">GitHub</a> repository.

```bash
npx omoralabs@latest add plan_vs_actuals
```

2. Replace the CSVs with your own data.
3. Create a local or remote database and load sample data:

<Callout>
The remote database service is provided by [Motherduck](https://motherduck.com/), a remote service for [DuckDB](https://duckdb.org/) databases. You must have an account to complete the remote setup. Motherduck provides a generours free tier.
</Callout>

```bash lineNumbers
# Create a local database and load sample data
  uv run omora-local

  # Create a remote database and load sample data
  uv run omora-remote
```
4. Run dbt to materialize the analytics models:
```bash lineNumbers
cd src/plan_vs_actuals/plan_vs_actuals_dbt
uv run dbt run
```
5. Connect to your favorite BI tool directly to the analytics layer. Example consumption on BI Tool:

```sql lineNumbers
SELECT * from "plan_vs_actuals"."analytics"."pnl_pivot"
ORDER BY date
```
```python lineNumbers
# Title adjustments
df = sql_plan_and_actuals
df['display_name'] = df['gl_account'].str.replace('_', ' ').str.replace('pct', '%').str.title()
df['display_name'] = df['display_name'].str.replace('Csm', 'CSM')
df['display_name'] = df['display_name'].str.replace('Csm ', 'CSM ')
df['display_name'] = df['display_name'].str.replace('Cogs', 'COGS ')
df['display_name'] = df['display_name'].str.replace('Ebitda', 'EBITDA')
```
